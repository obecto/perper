syntax = "proto3";

option java_multiple_files = true;
option java_package = "com.obecto.perper.protobuf";
option csharp_namespace = "Perper.Protocol.Protobuf";

package perper;

service Fabric {
    rpc Notifications (NotificationFilter) returns (stream Notification) {}
    rpc CallResultNotification (CallNotificationFilter) returns (Notification) {}
}

message NotificationFilter {
    string agent = 1;
    string instance = 2;
}

message CallNotificationFilter {
    string agent = 1;
    string call = 2;
}

message Notification {
    int64 notificationKey = 1;

    oneof affinity {
      string stringAffinity = 2;
      int64 intAffinity = 3;
    }
}
